s{% extends 'acc/base.html' %}
{% load static %}
{% block content %}
<script type="text/javascript">
    //// Get the CryptoCurrency Information from the API
    jQuery.ajax({
      url: "https://min-api.cryptocompare.com/data/pricemulti",
      data: "fsyms=BTC,ETH,DASH,LTC&tsyms=USD",
      dataType : 'json',
    }).done(function(data) {
      // console.log( "BTC : " + data.BTC.USD + ", ETH : " + data.ETH.USD + ", DASH : " + data.DASH.USD, LTC : " + data.LTC.USD);
      jQuery(".dashCoin").html('$' + data.DASH.USD);
      jQuery(".ethCoin").html('$' + data.ETH.USD);
      jQuery(".bitCoin").html('$' + data.BTC.USD);
      jQuery(".liteCoin").html('$' + data.LTC.USD);
    }).fail(function() {
      console.log( "API error" );
    });
  </script>
<body class="hold-transition dark-skin sidebar-mini theme-primary fixed">

<div class="wrapper">



	{% include 'acc/side.html' %}

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <div class="container-full">
      <!-- Content Header (Page header) -->
      <div class="content-header">
          <div class="d-flex align-items-center">
              <div class="me-auto">
                  <h4 class="page-title">Crypto Summary</h4>
                  <div class="d-inline-block align-items-center">
                      <nav>
                          <ol class="breadcrumb">
                              <li class="breadcrumb-item"><a href="#"><i class="mdi mdi-home-outline"></i></a></li>
                              <li class="breadcrumb-item" aria-current="page">Analyses</li>
                              <li class="breadcrumb-item active" aria-current="page">Crypto Summary</li>
                          </ol>
                      </nav>
                  </div>
              </div>
              
          </div>
      </div>
      <!-- Main content -->
      <section class="content">			
          <div class="row">		
            <div class="col-12">
              <div class="box">
                <div class="box-header with-border">
                  <h4 class="box-title">Daily Update</h4>
                </div>
                <div style="height:1259px; background-color: #1D2330; overflow:hidden; box-sizing: border-box; border: 1px solid #282E3B; border-radius: 4px; text-align: right; line-height:14px; font-size: 12px; font-feature-settings: normal; text-size-adjust: 100%; box-shadow: inset 0 -20px 0 0 #262B38; padding: 0px; margin: 0px; width: 100%;"><div style="height:1239px; padding:0px; margin:0px; width: 100%;"><iframe src="https://widget.coinlib.io/widget?type=full_v2&theme=dark&cnt=20&pref_coin_id=1505&graph=yes" width="100%" height="1235px" scrolling="auto" marginwidth="0" marginheight="0" frameborder="0" border="0" style="border:0;margin:0;padding:0;"></iframe></div><div style="color: #626B7F; line-height: 14px; font-weight: 400; font-size: 11px; box-sizing: border-box; padding: 2px 6px; width: 100%; font-family: Verdana, Tahoma, Arial, sans-serif;"><a href="https://coinlib.io" target="_blank" style="font-weight: 500; color: #626B7F; text-decoration:none; font-size:11px">Cryptocurrency Prices</a>&nbsp;by Coinlib</div></div>
                <!-- /.box-body -->
              </div>
              <!-- /.box -->
            </div>	  
            {% for i in stake %}
            <div class="col-xl-6 col-lg-6 col-md-6">
                <div class="card profile_card">
                    <div class="card-body">
                      <form id="calculator">
                        <div class="market-trade-buy">
                          <div class="input-group">
                          <img src="{{i.image.url}}" width="40" alt="">
                          </div>
                          <div class="input-group">
                              <input type="number" id="investamt" value="100" class="form-control" placeholder="Amount">
                              <div class="input-group-append">
                                  <span class="input-group-text">USD</span>
                              </div>
                          </div>
                          <p>Available:USD <span id="buyBalance">{{user.accountbalance}} USD</span></p>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            </div>
                            <select id="investyr">   
                              <option disabled selected value="0">Duration</option>
                              <option value="1">10 Days</option>
                              <option value="2">20 Days</option>
                              <option value="3">60 Days</option>
                              <option value="4">4 Weeks</option>
                              <option value="5">5 Weeks</option>
                              <option value="6">6 Weeks</option>
                              <option value="7">7 Weeks</option>
                              <option value="8">8 Weeks</option>
                              <option value="9">9 Weeks</option>
                              <option value="10">10 Weeks</option>
                       </select>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          <input id="intrate" type="text" class="form-control" value="{{i.rate}}" placeholder="Interest rate">
                          <div class="input-group-append">
                            <span class="input-group-text">Rate%</span>
                        </div>
                        
                      </div>
                        
                         
                      

<!-- Button trigger modal -->
<!-- Button trigger modal -->
<button type="button" id="calculate" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal-center">
  Stake
  </button>
  <div class="modal center-modal fade" id="modal-center" tabindex="-1">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title">Stake Returns</h5>
			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		  </div>
		  <div class="modal-body">
        <div id="investyield">
          <sup>$</sup><span id="yield">0.00</span>
          <small id="yieldamount">Future Stake Value</small>
          </div>
		  </div>
		  <div class="modal-footer modal-footer-uniform">
			<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
      <a href="{% url 'userurl:gain' i.id %}">	<button type="button" class="btn btn-primary float-end">Deposit</button></a>
		  </div>
		</div>
	  </div>
	</div>
                      </div>
                      </form>
                    </div>
                </div>
              
            </div>
           <!-- Modal -->
        
            {%  endfor %}            		
              <div class="col-lg-6 col-12">
                <div class="box">
                  <div class="box-header with-border">
                    <h4 class="box-title">Block Details</h4>
                  </div>
                  <div class="box-body">
                    <script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="8290" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div>
                  </div>
                  <!-- /.box-body -->
                </div>
                <!-- /.box -->
              </div>
              <div class="col-lg-6 col-12">
                <div class="box">
                  <div class="box-header with-border">
                    <h4 class="box-title">Block Details</h4>
                  </div>
                  <div class="box-body">
                    <script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="3408" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div>
                  </div>
                  <!-- /.box-body -->
                </div>
                <!-- /.box -->
              </div>
              <div class="col-lg-6 col-12">
                <div class="box">
                  <div class="box-header with-border">
                    <h4 class="box-title">Block Details</h4>
                  </div>
                  <div class="box-body">
                    <script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1027" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div>
                  </div>
                  <!-- /.box-body -->
                </div>
                <!-- /.box -->
              </div>
            
            </div>	
      </section>
      <!-- /.content -->
    </div>
</div>
  <!-- /.content-wrapper -->




  <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>

</div>
<!-- ./wrapper -->




	<!-- Page Content overlay -->


</body>
<script>
  //calculate Tip
function calculateInvestment() {
var investAmt = document.getElementById("investamt").value;
var investYr = document.getElementById("investyr").value;
var interestRate = document.getElementById("intrate").value;

//validate input
if (investAmt === "" || investYr == 0 || interestRate === "") {
  alert("Please enter values");
  return;
}

//check to see if this input is empty or less than or equal to 1
if (interestRate === "" || interestRate <= 1) {
  interestRate = 1;
  document.getElementById("yieldamount").style.display = "block";
} else {
  document.getElementById("yieldamount").style.display = "block";
}

//calculate tip
var total = [investAmt * (interestRate / 100) * investYr];

var grandTotal = parseFloat(total) + parseFloat(investAmt);

//round to two decimal places
grandTotal = Math.round(grandTotal * 100) / 100;

//next line allows us to always have two digits after decimal point
grandTotal = grandTotal.toFixed(2);

//display the tip
document.getElementById("investyield").style.display = "block";
document.getElementById("yield").innerHTML = grandTotal;
}

//hide the tip amount on load
document.getElementById("investyield").style.display = "none";
document.getElementById("yieldamount").style.display = "none";

//click to call function
document.getElementById("calculate").onclick = function() {
calculateInvestment();
};

</script>

{% endblock content %}